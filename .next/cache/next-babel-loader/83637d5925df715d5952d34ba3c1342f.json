{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport { Grid, Hidden, Container } from '@material-ui/core';\nimport { useSelector } from \"react-redux\";\nimport { MainLayout } from \"@src/components/MainLayout\";\nimport { AdvrtFormContainer } from './advrt_form/AdvrtFormContainer';\nimport { useStyles } from './useStyles';\nimport { i18n } from \"@root/i18n\";\nimport { userAPI } from '@src/api/api';\nimport { CreateAdvrt } from \"@src/components/advertisement/create_advrt/CreateAdvrt\";\nvar initCreateAdState = {\n  isFetch: false,\n  error: null,\n  adType: {\n    id: null,\n    name: '',\n    currency: [],\n    expired: []\n  },\n  category: {\n    id: null,\n    name: '',\n    childs: []\n  },\n  subCategory: {\n    id: null,\n    name: '',\n    data: {\n      adsParams: []\n    }\n  }\n};\nexport var CreateAdvrtContainer = function CreateAdvrtContainer() {\n  _s();\n\n  var lang = i18n.language;\n  var categoriesList = useSelector(function (_ref) {\n    var categories = _ref.categories;\n    return categories.list;\n  });\n\n  var _useState = useState(1),\n      tabValue = _useState[0],\n      setTabValue = _useState[1];\n\n  var _useState2 = useState([]),\n      adTypes = _useState2[0],\n      setAdTypes = _useState2[1];\n\n  var _useState3 = useState(initCreateAdState),\n      createAdvrt = _useState3[0],\n      setCreateAdvrt = _useState3[1];\n\n  var category = createAdvrt.category,\n      subCategory = createAdvrt.subCategory;\n\n  var _useState4 = useState(false),\n      isForm = _useState4[0],\n      setIsForm = _useState4[1];\n\n  var getAdTypes = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _adTypes;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setCreateAdvrt(_objectSpread(_objectSpread({}, createAdvrt), {}, {\n                isFetch: true\n              }));\n              _context.next = 4;\n              return userAPI.getAdTypes(lang);\n\n            case 4:\n              _adTypes = _context.sent;\n              setCreateAdvrt(_objectSpread(_objectSpread({}, createAdvrt), {}, {\n                isFetch: false\n              }));\n              setAdTypes(_adTypes);\n              setCreateAdvrt(_objectSpread(_objectSpread({}, createAdvrt), {}, {\n                adType: _adTypes[0]\n              }));\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              setCreateAdvrt(_objectSpread(_objectSpread({}, createAdvrt), {}, {\n                error: _context.t0\n              }));\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function getAdTypes() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleTab = function handleTab(_, newValue) {\n    setTabValue(newValue);\n  };\n\n  var setAdType = function setAdType() {\n    var _adTypes$filter = adTypes.filter(function (type) {\n      return type.id === tabValue;\n    }),\n        _adTypes$filter2 = _slicedToArray(_adTypes$filter, 1),\n        selectedAdType = _adTypes$filter2[0];\n\n    setCreateAdvrt(_objectSpread(_objectSpread({}, createAdvrt), {}, {\n      adType: selectedAdType\n    }));\n  };\n\n  var handleCtgr = function handleCtgr(id, name, childs) {\n    return function () {\n      setCreateAdvrt(_objectSpread(_objectSpread({}, createAdvrt), {}, {\n        category: {\n          id: id,\n          name: name,\n          childs: childs\n        }\n      }));\n    };\n  };\n\n  var handleSubCtgr = function handleSubCtgr(id, name) {\n    return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _yield$userAPI$getAdD, dataForCreateAd;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setIsForm(true);\n              setCreateAdvrt(_objectSpread(_objectSpread({}, createAdvrt), {}, {\n                isFetch: true\n              }));\n              _context2.next = 5;\n              return userAPI.getAdDataForCreate(category.id, id, lang);\n\n            case 5:\n              _yield$userAPI$getAdD = _context2.sent;\n              dataForCreateAd = _yield$userAPI$getAdD.dataForCreateAd;\n              setCreateAdvrt(_objectSpread(_objectSpread({}, createAdvrt), {}, {\n                isFetch: false,\n                subCategory: _objectSpread(_objectSpread({}, subCategory), {}, {\n                  id: id,\n                  name: name,\n                  data: dataForCreateAd\n                })\n              }));\n              _context2.next = 13;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](0);\n              setCreateAdvrt(_objectSpread(_objectSpread({}, createAdvrt), {}, {\n                error: _context2.t0\n              }));\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 10]]);\n    }));\n  };\n\n  console.log(createAdvrt);\n  useEffect(function () {\n    getAdTypes();\n  }, []);\n  useEffect(function () {\n    adTypes.length && setAdType();\n  }, [tabValue]);\n  var classes = useStyles();\n  return __jsx(MainLayout, null, __jsx(Container, {\n    maxWidth: \"lg\"\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 9\n  }, isForm ? __jsx(AdvrtFormContainer, {\n    setIsForm: setIsForm,\n    createAdvrt: createAdvrt\n  }) : __jsx(CreateAdvrt, {\n    handleTab: handleTab,\n    handleCtgr: handleCtgr,\n    handleSubCtgr: handleSubCtgr,\n    adTypes: adTypes,\n    tabValue: tabValue,\n    createAdvrt: createAdvrt,\n    categoriesList: categoriesList\n  })), __jsx(Hidden, {\n    smDown: true\n  }, __jsx(Grid, {\n    item: true,\n    md: 3,\n    className: classes.adBanner\n  }, __jsx(\"div\", {\n    className: \"right-banner\"\n  }))))));\n};\n\n_s(CreateAdvrtContainer, \"OEacznernza8p9mGrX9u8j4WXDQ=\", false, function () {\n  return [useSelector, useStyles];\n});\n\n_c = CreateAdvrtContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateAdvrtContainer\");","map":{"version":3,"sources":["C:/Users/abror/Documents/projects/slondo/src/components/advertisement/create_advrt/CreateAdvrtContainer.tsx"],"names":["React","useEffect","useState","Grid","Hidden","Container","useSelector","MainLayout","AdvrtFormContainer","useStyles","i18n","userAPI","CreateAdvrt","initCreateAdState","isFetch","error","adType","id","name","currency","expired","category","childs","subCategory","data","adsParams","CreateAdvrtContainer","lang","language","categoriesList","categories","list","tabValue","setTabValue","adTypes","setAdTypes","createAdvrt","setCreateAdvrt","isForm","setIsForm","getAdTypes","handleTab","_","newValue","setAdType","filter","type","selectedAdType","handleCtgr","handleSubCtgr","getAdDataForCreate","dataForCreateAd","console","log","length","classes","adBanner"],"mappings":"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","sourcesContent":["import React, {FC, useEffect, useState} from 'react';\r\nimport {Grid, Hidden, Container} from '@material-ui/core';\r\nimport {useSelector} from \"react-redux\";\r\nimport {RootState} from \"@src/redux/rootReducer\";\r\nimport {MainLayout} from \"@src/components/MainLayout\";\r\nimport {AdvrtFormContainer} from './advrt_form/AdvrtFormContainer';\r\nimport {useStyles} from './useStyles';\r\nimport {i18n} from \"@root/i18n\";\r\nimport {userAPI} from '@src/api/api';\r\nimport {CreateAdvrt} from \"@src/components/advertisement/create_advrt/CreateAdvrt\";\r\n\r\n\r\nconst initCreateAdState = {\r\n    isFetch: false,\r\n    error: null,\r\n    adType: {\r\n        id: null,\r\n        name: '',\r\n        currency: [],\r\n        expired: [],\r\n    },\r\n    category: {\r\n        id: null,\r\n        name: '',\r\n        childs: []\r\n    },\r\n    subCategory: {\r\n        id: null,\r\n        name: '',\r\n        data: {\r\n            adsParams: []\r\n        }\r\n    }\r\n};\r\n\r\nexport const CreateAdvrtContainer: FC<void> = () => {\r\n    const lang = i18n.language;\r\n\r\n    const categoriesList = useSelector(({categories}: RootState) => categories.list);\r\n\r\n    const [tabValue, setTabValue] = useState(1);\r\n\r\n    const [adTypes, setAdTypes] = useState([]);\r\n\r\n    const [createAdvrt, setCreateAdvrt] = useState(initCreateAdState);\r\n    const {category, subCategory} = createAdvrt;\r\n\r\n    const [isForm, setIsForm] = useState(false);\r\n\r\n    const getAdTypes = async () => {\r\n        try {\r\n            setCreateAdvrt({...createAdvrt, isFetch: true});\r\n            const adTypes = await userAPI.getAdTypes(lang);\r\n            setCreateAdvrt({...createAdvrt, isFetch: false});\r\n\r\n            setAdTypes(adTypes);\r\n            setCreateAdvrt({\r\n                ...createAdvrt,\r\n                adType: adTypes[0]\r\n            })\r\n        } catch (error) {\r\n            setCreateAdvrt({...createAdvrt, error});\r\n        }\r\n    };\r\n\r\n    const handleTab = (_, newValue) => {\r\n        setTabValue(newValue);\r\n    };\r\n\r\n    const setAdType = () => {\r\n        const [selectedAdType] = adTypes.filter(type => type.id === tabValue);\r\n\r\n        setCreateAdvrt({\r\n            ...createAdvrt,\r\n            adType: selectedAdType\r\n        });\r\n    };\r\n\r\n    const handleCtgr = (id, name, childs) => () => {\r\n        setCreateAdvrt({\r\n            ...createAdvrt,\r\n            category: {\r\n                id,\r\n                name,\r\n                childs\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleSubCtgr = (id, name) => async () => {\r\n        try {\r\n            setIsForm(true);\r\n\r\n            setCreateAdvrt({\r\n                ...createAdvrt,\r\n                isFetch: true\r\n            });\r\n\r\n            const {dataForCreateAd}: any = await userAPI.getAdDataForCreate(category.id, id, lang);\r\n\r\n            setCreateAdvrt({\r\n                ...createAdvrt,\r\n                isFetch: false,\r\n                subCategory: {\r\n                    ...subCategory,\r\n                    id,\r\n                    name,\r\n                    data: dataForCreateAd\r\n                }\r\n            });\r\n        } catch (error) {\r\n            setCreateAdvrt({\r\n                ...createAdvrt,\r\n                error\r\n            });\r\n        }\r\n    };\r\n\r\n    console.log(createAdvrt)\r\n\r\n    useEffect(() => {\r\n        getAdTypes();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        adTypes.length && setAdType();\r\n    }, [tabValue]);\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <MainLayout>\r\n            <Container maxWidth=\"lg\">\r\n                <Grid container spacing={1}>\r\n                    <Grid item xs={12} md={9}>\r\n                        {\r\n                            isForm\r\n                                ? <AdvrtFormContainer\r\n                                    setIsForm={setIsForm}\r\n                                    createAdvrt={createAdvrt}\r\n                                />\r\n                                : <CreateAdvrt\r\n                                    handleTab={handleTab}\r\n                                    handleCtgr={handleCtgr}\r\n                                    handleSubCtgr={handleSubCtgr}\r\n                                    adTypes={adTypes}\r\n                                    tabValue={tabValue}\r\n                                    createAdvrt={createAdvrt}\r\n                                    categoriesList={categoriesList}\r\n                                />\r\n                        }\r\n                    </Grid>\r\n                    <Hidden smDown>\r\n                        <Grid item md={3} className={classes.adBanner}>\r\n                            <div className=\"right-banner\"/>\r\n                        </Grid>\r\n                    </Hidden>\r\n                </Grid>\r\n            </Container>\r\n        </MainLayout>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}